# DevTUI
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by devflow from github.com/tinywasm/devflow"></a>
<!-- END_SECTION:BADGES_SECTION -->

DevTUI is a **pure display layer** built on Bubbletea that organizes messages from business logic into a clean terminal interface.

## üéØ Design Philosophy (Consumer-Driven)

DevTUI follows **consumer-driven interface design**: your application defines the UI interface, and DevTUI implements it. This ensures:
- **Zero Coupling**: Business logic never imports `devtui`.
- **High Testability**: Easily mock UI dependencies.
- **Pluggability**: Swap UI implementations without changing core logic.

### Integration Interface
Define this in your application to use DevTUI:
```go
type TuiInterface interface {
    NewTabSection(title, description string) any
    AddHandler(handler any, timeout time.Duration, color string, tabSection any)
    RemoveTabSection(section any) // Dynamic removal
    Start(args ...any)            // Optional *sync.WaitGroup support
    RefreshUI()
    ReturnFocus() error
}
```

## üöÄ Quick Start

```go
func main() {
    tui := devtui.NewTUI(&devtui.TuiConfig{AppName: "Demo", ExitChan: make(chan bool)})

    // 1. Create a section
    ops := tui.NewTabSection("Operations", "System Tasks")
    
    // 2. Add handlers (DevTUI detects implemented interfaces automatically)
    tui.AddHandler(&MyHandler{}, 5*time.Second, "#10b981", ops)

    // 3. Optional: Remove section dynamically
    // tui.RemoveTabSection(ops)

    tui.Start()
}
```

## üß© Handler Interfaces

DevTUI detects 5 specialized interfaces to determine how to display and interact with your handlers:

| Interface | Purpose | Key Methods |
|-----------|---------|-------------|
| **Display** | Read-only info | `Name()`, `Content()` |
| **Edit** | Interactive input | `Label()`, `Value()`, `Change(newVal)` |
| **Execution** | Action buttons | `Label()`, `Execute()` |
| **Interactive** | Rich interaction | `WaitingForUser()`, `Value()`, `Change()` |
| **Loggable** | Auto-logging | `SetLog(func(...any))` |

### üí° Clean Terminal Policy
Handlers implementing `Loggable` receive a logger. DevTUI only displays the **most recent message** per handler to keep the view focused. Full history is preserved for debugging.

#### üîÑ Animated Progress Logs
For long-running operations, you can use the `LogOpen` and `LogClose` prefixes as the **first argument** to the logger. This triggers an auto-animated spinner and groups messages under the same line.

```go
// Start animation (use "[..." literal or devtui.LogOpen)
handler.log("[...", "Deploying to production")

// ... long operation ...

// Stop animation and show final result (use "...]" literal or devtui.LogClose)
handler.log("...]", "Deployment complete")
```

## ‚å®Ô∏è Navigation & Shortcuts

- **Tab / Shift+Tab**: Switch tabs
- **Arrows**: Navigate fields / Scroll view
- **Enter / Esc**: Execute (Edit) / Cancel
- **Global Shortcuts**: Handlers can implement `Shortcuts() []map[string]string` to register keys (e.g., 't' for test) that work from any tab.

## üìö Further Reading

- [‚Üí Why DevTUI? (Full Purpose)](docs/DESCRIPTION.md)
- [‚Üí Complete Demo Example](example/demo/main.go)
- [‚Üí Implementation Examples](example/)

---
[Contributing](https://github.com/tinywasm/cdvelop/blob/main/CONTRIBUTING.md) | Built with [Bubbletea](https://github.com/charmbracelet/bubbletea)
